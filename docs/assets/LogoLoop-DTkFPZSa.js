import{r as e,j as E}from"./index-RvermAfE.js";const N={SMOOTH_TAU:.25,MIN_COPIES:2,COPY_HEADROOM:2},$=n=>typeof n=="number"?`${n}px`:n??void 0,V=(n,c,u)=>{e.useEffect(()=>{if(!window.ResizeObserver){const r=()=>n();return window.addEventListener("resize",r),n(),()=>window.removeEventListener("resize",r)}const l=c.map(r=>{if(!r.current)return null;const o=new ResizeObserver(n);return o.observe(r.current),o});return n(),()=>{l.forEach(r=>r?.disconnect())}},[n,c,u])},J=(n,c,u)=>{e.useEffect(()=>{const l=n.current?.querySelectorAll("img")??[];if(l.length===0){c();return}let r=l.length;const o=()=>{r-=1,r===0&&c()};return l.forEach(a=>{const i=a;i.complete?o():(i.addEventListener("load",o,{once:!0}),i.addEventListener("error",o,{once:!0}))}),()=>{l.forEach(a=>{a.removeEventListener("load",o),a.removeEventListener("error",o)})}},[c,n,u])},K=(n,c,u,l,r,o,a)=>{const i=e.useRef(null),M=e.useRef(null),f=e.useRef(0),R=e.useRef(0);e.useEffect(()=>{const _=n.current;if(!_)return;const g=a?l:u;if(g>0){f.current=(f.current%g+g)%g;const v=a?`translate3d(0, ${-f.current}px, 0)`:`translate3d(${-f.current}px, 0, 0)`;_.style.transform=v}const O=v=>{M.current===null&&(M.current=v);const d=Math.max(0,v-M.current)/1e3;M.current=v;const S=r&&o!==void 0?o:c,L=1-Math.exp(-d/N.SMOOTH_TAU);if(R.current+=(S-R.current)*L,g>0){let b=f.current+R.current*d;b=(b%g+g)%g,f.current=b;const I=a?`translate3d(0, ${-f.current}px, 0)`:`translate3d(${-f.current}px, 0, 0)`;_.style.transform=I}i.current=requestAnimationFrame(O)};return i.current=requestAnimationFrame(O),()=>{i.current!==null&&(cancelAnimationFrame(i.current),i.current=null),M.current=null}},[c,u,l,r,o,a,n])},Q=e.memo(({logos:n,speed:c=120,direction:u="left",width:l="100%",logoHeight:r=28,gap:o=32,pauseOnHover:a,hoverSpeed:i,fadeOut:M=!1,fadeOutColor:f,scaleOnHover:R=!1,renderItem:_,ariaLabel:g="Partner logos",className:O,style:v})=>{const d=e.useRef(null),S=e.useRef(null),L=e.useRef(null),[b,I]=e.useState(0),[P,T]=e.useState(0),[j,z]=e.useState(N.MIN_COPIES),[F,w]=e.useState(!1),A=e.useMemo(()=>{if(i!==void 0)return i;if(a===!0)return 0;if(a!==!1)return 0},[i,a]),h=u==="up"||u==="down",D=e.useMemo(()=>{const t=Math.abs(c);let s;h?s=u==="up"?1:-1:s=u==="left"?1:-1;const m=c<0?-1:1;return t*s*m},[c,u,h]),y=e.useCallback(()=>{const t=d.current?.clientWidth??0,s=L.current?.getBoundingClientRect?.(),m=s?.width??0,p=s?.height??0;if(h){const x=d.current?.parentElement?.clientHeight??0;if(d.current&&x>0){const C=Math.ceil(x);d.current.style.height!==`${C}px`&&(d.current.style.height=`${C}px`)}if(p>0){T(Math.ceil(p));const C=d.current?.clientHeight??x??p,G=Math.ceil(C/p)+N.COPY_HEADROOM;z(Math.max(N.MIN_COPIES,G))}}else if(m>0){I(Math.ceil(m));const x=Math.ceil(t/m)+N.COPY_HEADROOM;z(Math.max(N.MIN_COPIES,x))}},[h]);V(y,[d,L],[n,o,r,h]),J(L,y,[n,o,r,h]),K(S,D,b,P,F,A,h);const q=e.useMemo(()=>({"--logoloop-gap":`${o}px`,"--logoloop-logoHeight":`${r}px`,...f&&{"--logoloop-fadeColor":f}}),[o,r,f]),W=e.useMemo(()=>["logoloop",h?"logoloop--vertical":"logoloop--horizontal",M&&"logoloop--fade",R&&"logoloop--scale-hover",O].filter(Boolean).join(" "),[h,M,R,O]),k=e.useCallback(()=>{A!==void 0&&w(!0)},[A]),Y=e.useCallback(()=>{A!==void 0&&w(!1)},[A]),H=e.useCallback((t,s)=>{if(_)return E.jsx("li",{className:"logoloop__item",role:"listitem",children:_(t,s)},s);const m="node"in t,p=m?E.jsx("span",{className:"logoloop__node","aria-hidden":!!t.href&&!t.ariaLabel,children:t.node}):E.jsx("img",{src:t.src,srcSet:t.srcSet,sizes:t.sizes,width:t.width,height:t.height,alt:t.alt??"",title:t.title,loading:"lazy",decoding:"async",draggable:!1}),x=m?t.ariaLabel??t.title:t.alt??t.title,C=t.href?E.jsx("a",{className:"logoloop__link",href:t.href,"aria-label":x||"logo link",target:"_blank",rel:"noreferrer noopener",children:p}):p;return E.jsx("li",{className:"logoloop__item",role:"listitem",children:C},s)},[_]),B=e.useMemo(()=>Array.from({length:j},(t,s)=>E.jsx("ul",{className:"logoloop__list",role:"list","aria-hidden":s>0,ref:s===0?L:void 0,children:n.map((m,p)=>H(m,`${s}-${p}`))},`copy-${s}`)),[j,n,H]),U=e.useMemo(()=>({width:h?$(l)==="100%"?void 0:$(l):$(l)??"100%",...q,...v}),[l,q,v,h]);return E.jsx("div",{ref:d,className:W,style:U,role:"region","aria-label":g,children:E.jsx("div",{className:"logoloop__track",ref:S,onMouseEnter:k,onMouseLeave:Y,children:B})})});Q.displayName="LogoLoop";export{Q as LogoLoop,Q as default};
